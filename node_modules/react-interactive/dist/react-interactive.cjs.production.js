"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("event-from");function c(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(c){if("default"!==c){var o=Object.getOwnPropertyDescriptor(e,c);Object.defineProperty(t,c,o.get?o:{enumerable:!0,get:function(){return e[c]}})}})),t.default=e,Object.freeze(t)}var o=c(e);const a=({tagName:e,type:t})=>"SELECT"!==e&&("INPUT"!==e||"checkbox"!==t&&"radio"!==t),r=({tagName:e,type:t})=>["BUTTON","SELECT"].includes(e)||"INPUT"===e&&["checkbox","radio","submit"].includes(t),n=({tagName:e})=>["BUTTON","INPUT","SELECT","TEXTAREA","FIELDSET"].includes(e),s=e=>"string"==typeof e||"object"==typeof e&&null!==e||"number"==typeof e||"bigint"==typeof e?String(e):"",i=e=>{document.body.style.userSelect=e,document.body.style.webkitUserSelect=e},u={hover:!1,active:!1,focus:!1},l={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousedown:"onMouseDown",mouseup:"onMouseUp",pointerenter:"onPointerEnter",pointerleave:"onPointerLeave",pointerdown:"onPointerDown",pointerup:"onPointerUp",pointercancel:"onPointerCancel",touchstart:"onTouchStart",touchend:"onTouchEnd",touchcancel:"onTouchCancel",keydown:"onKeyDown",keyup:"onKeyUp",focus:"onFocus",blur:"onBlur",dragstart:"onDragStart",dragend:"onDragEnd"},v=Object.values(l),f=o.forwardRef((function({as:e,children:c,onStateChange:f,disabled:y=!1,useExtendedTouchActive:p=!1,hoverClassName:m="hover",activeClassName:d="active",mouseActiveClassName:b="mouseActive",touchActiveClassName:h="touchActive",keyActiveClassName:k="keyActive",focusClassName:S="focus",focusFromKeyClassName:g="focusFromKey",focusFromMouseClassName:w="focusFromMouse",focusFromTouchClassName:A="focusFromTouch",disabledClassName:C="disabled",hoverStyle:E,activeStyle:K,mouseActiveStyle:T,touchActiveStyle:N,keyActiveStyle:D,focusStyle:F,focusFromKeyStyle:O,focusFromMouseStyle:j,focusFromTouchStyle:x,disabledStyle:P,...U},M){const I=e||"button",[R,L]=o.useState({state:u,prevState:u}),B="touchActive"===R.state.active;o.useEffect((()=>{f&&f(R)}),[R.state.hover,R.state.active,R.state.focus]);const _=o.useRef(!1);_.current=y&&"string"!=typeof I;const[,q]=o.useState(!1),X=o.useRef(null),$=o.useCallback((e=>{X.current=e,"function"==typeof M?M(e):M&&(M.current=e),_.current&&q((e=>!e))}),[M]),z=o.useRef({enterKeyDown:!1,spaceKeyDown:!1}),G=o.useRef({isDragging:!1}),H=o.useCallback(((...e)=>{L((t=>{const c={...t.state};e.forEach((({iStateKey:e,state:o,action:a})=>{"enter"===a?c[e]=o:"exit"!==a||t.state[e]!==o||G.current.isDragging&&"active"===e||(c[e]=!1)}));const o={state:c,prevState:t.state};return(({state:e,prevState:t})=>e.hover!==t.hover||e.active!==t.active||e.focus!==t.focus)(o)?o:t}))}),[]),J=o.useCallback((()=>{z.current.enterKeyDown=!1,z.current.spaceKeyDown=!1,H({iStateKey:"focus",state:!1,action:"enter"},{iStateKey:"active",state:"keyActive",action:"exit"})}),[H]);o.useEffect((()=>{y&&R.state.focus&&(n(X.current||{})||"string"==typeof I)&&(X.current&&"function"==typeof X.current.blur&&X.current.blur(),J())}),[y,R.state.focus,J,I]);const Q=o.useCallback((e=>{switch(e.type){case"focus":e.target===X.current&&H({iStateKey:"focus",state:`focusFrom${t.eventFrom(e).replace(/^\w/,(e=>e.toUpperCase()))}`,action:"enter"});break;case"blur":J();break;case"keydown":case"keyup":if(" "===e.key)z.current.spaceKeyDown="keydown"===e.type;else{if("Enter"!==e.key)break;z.current.enterKeyDown="keydown"===e.type}H({iStateKey:"active",state:"keyActive",action:z.current.enterKeyDown&&a(X.current||{})||z.current.spaceKeyDown&&r(X.current||{})?"enter":"exit"});break;case"dragstart":G.current.isDragging=!0,H({iStateKey:"active",state:`${t.eventFrom(e)}Active`,action:"enter"});break;case"dragend":G.current.isDragging=!1,H({iStateKey:"active",state:!1,action:"enter"});break;default:switch(t.eventFrom(e)){case"mouse":switch(e.type){case"mouseenter":case"pointerenter":H({iStateKey:"hover",state:!0,action:"enter"});break;case"mouseleave":case"pointerleave":case"pointercancel":H({iStateKey:"hover",state:!1,action:"enter"},{iStateKey:"active",state:"mouseActive",action:"exit"});break;case"mousedown":case"pointerdown":H({iStateKey:"active",state:"mouseActive",action:"enter"});break;case"mouseup":case"pointerup":H({iStateKey:"active",state:"mouseActive",action:"exit"})}break;case"touch":switch(e.type){case"touchstart":case"pointerdown":H({iStateKey:"active",state:"touchActive",action:"enter"});break;case"touchend":case"touchcancel":case"pointerup":case"pointercancel":case"mouseenter":p&&!["touchend","touchcancel"].includes(e.type)||H({iStateKey:"active",state:"touchActive",action:"exit"});break;case"mouseleave":H({iStateKey:"hover",state:!1,action:"enter"},{iStateKey:"active",state:"mouseActive",action:"exit"})}}}U[l[e.type]]&&U[l[e.type]](e)}),[...v.map((e=>U[e])),p,H,J]),V={};v.forEach((e=>{V[e]=Q}));const W=o.useRef(void 0);o.useEffect((()=>{if(B&&!p)return W.current=window.setTimeout((()=>{H({iStateKey:"active",state:"touchActive",action:"exit"})}),750),()=>window.clearTimeout(W.current)}),[B,p,H]),o.useEffect((()=>{if(B&&p)return i("none"),()=>i("")}),[B,p]);let Y=s(U.className);const Z={};!y&&(({tagName:e,type:t},c)=>["BUTTON","A","AREA","SELECT"].includes(e)||"INPUT"===e&&["checkbox","radio","submit"].includes(t)||"INPUT"!==e&&"TEXTAREA"!==e&&c)(X.current||{},Boolean(U.onClick||U.onClickCapture))&&(Z.cursor="pointer"),Object.assign(Z,U.style);const ee=(e,t)=>{Y=[Y,s(e)].filter((e=>e)).join(" "),Object.assign(Z,t)};if(y)ee(C,P);else{if(R.state.hover&&ee(m,E),R.state.active)switch(ee(d,K),R.state.active){case"mouseActive":ee(b,T);break;case"touchActive":ee(h,N);break;case"keyActive":ee(k,D)}if(R.state.focus)switch(ee(S,F),R.state.focus){case"focusFromMouse":ee(w,j);break;case"focusFromTouch":ee(A,x);break;case"focusFromKey":ee(g,O)}}const te=o.useMemo((()=>Z),[Object.entries(Z).join()]);let ce=null;return y&&(ce={onClick:void 0,onClickCapture:void 0,onDoubleClick:void 0,onDoubleClickCapture:void 0,tabIndex:void 0,href:void 0},n("string"==typeof I?{tagName:I.toUpperCase()}:X.current||{})&&(ce.disabled=!0)),o.createElement(I,Object.assign({},U,V,ce,{className:""===Y?void 0:Y,style:te,ref:$}),"function"==typeof c?c(R.state):c)})),y=Object.assign(o.memo(f),{Button:o.memo(f),A:p("a"),Input:p("input"),Select:p("select"),Div:p("div"),Span:p("span")});function p(e){return o.forwardRef((function(t,c){return o.createElement(y,Object.assign({},t,{as:e,ref:c}))}))}Object.defineProperty(exports,"eventFrom",{enumerable:!0,get:function(){return t.eventFrom}}),Object.defineProperty(exports,"setEventFrom",{enumerable:!0,get:function(){return t.setEventFrom}}),exports.Interactive=y,exports.createInteractive=p;
//# sourceMappingURL=react-interactive.cjs.production.js.map
